{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/initState.js","../src/init.js","../src/index.js"],"sourcesContent":["export function observer(data) {\n  console.log('observe', data);\n  // 1.对象\n  if (typeof data !== 'object' || data == null) {\n    return data;\n  }\n  // 对象通过一个类\n  return new Observer(data); // 劫持\n}\n\nclass Observer {\n  constructor(value) {\n    this.walk(value); // 遍历\n  }\n  walk(data) {\n    let keys = Object.keys(data);\n    for (let i = 0; i < keys.length; i++) {\n      // 对每个属性进行劫持\n      let key = keys[i];\n      let value = data[key];\n      defineReactive(data, key, value); //对对象中的某个属性进行劫持\n    }\n  }\n}\nfunction defineReactive(data, key, value) {\n  observer(value); // 深度劫持\n  Object.defineProperty(data, key, {\n    get() {\n      console.log('获取的时候触发');\n      return value;\n    },\n    set(newValue) {\n      console.log('修改的时候触发');\n      if (newValue === value) {\n        return;\n      }\n      observer(value); // 深度劫持\n      value = newValue;\n    }\n  })\n}\n// 总结：1.对象，Object.defineProperty有缺点，只能对对象中的一个属性进行劫持，\n// 2.遍历，但是只能对第一层属性进行拦截\n// 3.对所有的属性进行递归拦截，获取get，set,如果用户设置的值是一个对象","import { observer } from './observe/index';\nexport function initState(vm) {\n  let ops = vm.$options;\n  console.log('ops', ops);\n  // 判断\n  if (ops.props) {\n    initProps()\n  }\n  if (ops.data) {\n    initData(vm)\n  }\n  if (ops.watch) {\n    initWatch()\n  }\n  if (ops.computed) {\n    initComputed()\n  }\n  if (ops.methods) {\n    initMethods()\n  }\n}\n//vue2 对data初始化，1种是函数，一种是对象\nfunction initData(vm) {\n  console.log('data初始化', vm);\n  let data = vm.$options.data;\n  data = vm._data =  typeof data === 'function' ? data.call(vm) : data; // 注意this\n  // 数据进行劫持\n  observer(data)\n}\nfunction initProps() {}\nfunction initWatch() {}\nfunction initComputed() {}\nfunction initMethods() {}","import { initState } from './initState';\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    console.log('111', options);\n    let vm = this;\n    vm.$options = options;\n    // 初始化状态\n    initState(vm);\n  }\n}","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n  console.log('111', options);\n  // 初始化配置项\n  this._init(options);\n}\ninitMixin(Vue);\nexport default Vue;"],"names":["observer","data","console","log","_typeof","Observer","value","_classCallCheck","walk","_createClass","key","keys","Object","i","length","defineReactive","defineProperty","get","set","newValue","initState","vm","ops","$options","props","initData","watch","computed","methods","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}